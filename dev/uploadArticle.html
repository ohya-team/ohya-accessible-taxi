<!DOCTYPE html>
<html lang="en">

<head>

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>新增文章</title>
        <link rel="stylesheet" href="./css/style.css">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@700&display=swap" rel="stylesheet">
    </head>
</head>

<body class="animate-background">
    @@include('layout/header.html')
<div id="app">
    <div class="uploadArticle-container">
        <form  class="uploadArticle-form" method="POST" enctype="multipart/form-data">
            <h3>發表新文章</h3>
            <div class="uploadArticle-content">
                <p>文章圖片</p>
                <div class="upload-picture">
                    <!--預覽圖片-->
                    <div class="uploadImg">

                        <img id="uploadImg" src="" alt="">
                    </div>
                        <input type="file" name="art_img" accept="image/gif,image/jpeg,image/png,image/jpg" @change="fileChange" required/>
                    <button class="upload-picture-btn">
                        <img src="images/forum/upload.jpg" alt="">
                        <span class="mini">上傳圖片</span>
                    </button>
                </div>
                <div class="upload-category">
                    <div class="upload-article-sort">
                        <label class="def" for="art_cat">文章類別</label>
                        <select name="art_cat" id="art_cat" class="def">
                            <option value="一般預約">一般預約</option>
                            <option value="包車旅遊">包車旅遊</option>
                            <option value="優良司機">優良司機</option>
                            <option value="精選車種">精選車種</option>
                        </select>
                    </div>
                    <div class="uplaod-article-topic">
                        <label class="def" for="art_title">文章標題</label>
                        <input class="def" type="text" id="art_title" placeholder="文章標題不得超過13個字" maxlength="13" name="art_title" required>
                    </div>
                </div>
                <label class="def" for="art_content">文章內容</label>
                <textarea name="art_content" cols="30" rows="10" class="upload-txt" id="art_content"
                    onKeyUp="textCounter(art_content,remLen,500)" onKeyDown="textCounter(art_content,remLen,500)" ></textarea>
                <div class="word-left">
                    剩餘字數 :<input name="remLen" type="text" value="500" size="5" readonly="readonly">
                </div>
                <input type="text" name="mem_no" :value="detailInfo[0].MEM_NO" >
                <div class="upload-btn">
                    <button class="btn-main" id="popbox-btn" @click="submitArticle">送出</button>
                    <a href="forum.html">
                        <button class="btn-third">取消</button>                      
                    </a>
                    
                </div>
            </div>
        </form>
    </div>
</div>
    <div class="pop-up-box" style="display: none;">
        <div class="item">
            <div class="icon">
                <i class="fa fa-check-circle-o" aria-hidden="true"></i>
            </div>
            <h2>文章新增成功</h2>
            <p>可以至討論區查看您的文章</p>
            <button class="btn-main" type="submit" id="pop-up-slot">確定</button>
        </div>
    </div>
    @@include('layout/footer.html')
    <!-- @@include('layout/slotmachine2.html') -->
    <script src="./js/uploadArticle.js"></script>
    <script>
        function textCounter(field, countfield, maxlimit) {
    // 函數，3個參數，表單名字，表單域元素名，限制字符；  
    if (field.value.length > maxlimit)
        //如果元素區字符數大於最大字符數，按照最大字符數截斷；  
        field.value = field.value.substring(0, maxlimit);
    else
        countfield.value = maxlimit - field.value.length;

    document.querySelector(".pop-up-box").classList.add('active');

    document.getElementById("pop-up-slot").addEventListener("click", function () {
    document.getElementById("slotmachine-pop-up").classList.remove('slot-hide');
    document.querySelector(".pop-up-box").classList.remove('active');
    })
}
    </script>
    

</body>

</html>